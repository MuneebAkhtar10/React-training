{"ast":null,"code":"var _jsxFileName = \"/home/dev/Desktop/react-firebase/src/components/AuthContext.js\";\nimport React, { Component, createContext } from 'react';\nimport axios from 'axios';\nimport AxiosHelper from '../utils/Requests/AxiosHelper';\nimport Authenticate from '../utils/Auth/Authenticate';\nconst AuthContext = createContext();\n\nclass AuthProvider extends Component {\n  constructor(_props) {\n    super(_props);\n    this.state = {\n      isAuth: false,\n      email: ''\n    };\n\n    this.login = (user, props, e) => {\n      e.preventDefault();\n      AxiosHelper();\n      axios.post('/api/v1/auth', {\n        user: { ...user\n        }\n      }, {\n        withCredentials: true\n      }).then(_resp => {\n        this.setState({\n          isAuth: true\n        });\n        props.history.push(\"/\");\n      }).catch(err => console.log(err));\n    };\n\n    this.signup = (user, props, e) => {\n      e.preventDefault();\n      AxiosHelper();\n      axios.post('/api/v1/registrations', {\n        user: { ...user\n        }\n      }, {\n        withCredentials: true\n      }).then(resp => {\n        this.setState({\n          isAuth: true\n        });\n        props.history.push(\"/\");\n      }).catch(err => console.log(err));\n    };\n\n    this.forgotPass = (user, props, e) => {\n      e.preventDefault();\n      AxiosHelper();\n      axios.post('/api/v1/auth/password/forgot', {\n        email: user.email\n      }).then(resp => {\n        this.setState({\n          isAuth: false\n        });\n        props.history.push(\"/forgot-password/complete?success=true\");\n      }).catch(err => console.log(err));\n    };\n\n    this.resetPass = (user, token, e) => {\n      e.preventDefault();\n      AxiosHelper();\n      axios.post('/api/v1/auth/password/reset', {\n        password: user.password,\n        token\n      }).then(_resp => {\n        this.setState({\n          isAuth: false\n        });\n        window.location.href = \"/login\";\n      }).catch(err => console.log(err));\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      AxiosHelper();\n      axios.delete('/api/v1/auth/logout').then(_resp => {\n        this.setState({\n          isAuth: false\n        });\n        window.location.href = '/';\n      }).catch(err => console.log(err));\n    };\n  }\n\n  componentDidMount() {\n    Authenticate().then(resp => this.setState({ ...resp\n    })).catch(err => console.log(err));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n      value: {\n        isAuth: this.state.isAuth,\n        email: this.state.email,\n        signup: this.signup,\n        login: this.login,\n        logout: this.logout,\n        forgotPass: this.forgotPass,\n        resetPass: this.resetPass\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, this.props.children);\n  }\n\n}\n\nconst AuthConsumer = AuthContext.Consumer;\nexport { AuthProvider, AuthConsumer };","map":{"version":3,"sources":["/home/dev/Desktop/react-firebase/src/components/AuthContext.js"],"names":["React","Component","createContext","axios","AxiosHelper","Authenticate","AuthContext","AuthProvider","constructor","props","state","isAuth","email","login","user","e","preventDefault","post","withCredentials","then","_resp","setState","history","push","catch","err","console","log","signup","resp","forgotPass","resetPass","token","password","window","location","href","logout","delete","componentDidMount","render","children","AuthConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, {Component, createContext} from 'react'\nimport axios from 'axios'\nimport AxiosHelper from '../utils/Requests/AxiosHelper'\nimport Authenticate from '../utils/Auth/Authenticate'\n\nconst AuthContext = createContext()\n\nclass AuthProvider extends Component {\n  state = { isAuth: false, email: '' }\n\n  constructor(props){\n    super(props)\n  }\n\n  componentDidMount(){\n    Authenticate()\n    .then( (resp) => this.setState({ ...resp }) )\n    .catch( err => console.log(err))\n  }\n\n  login = (user, props, e) => {\n    e.preventDefault()\n\n    AxiosHelper()\n    axios.post('/api/v1/auth', { user: { ...user } }, { withCredentials: true })\n    .then( _resp => {\n      this.setState({ isAuth: true })\n      props.history.push(\"/\")\n    })\n    .catch( err => console.log(err))\n  }\n\n  signup = (user, props, e) => {\n    e.preventDefault()\n\n    AxiosHelper()\n    axios.post('/api/v1/registrations', { user: { ...user } }, { withCredentials: true })\n    .then( resp => {\n      this.setState({ isAuth: true })\n      props.history.push(\"/\")\n    })\n    .catch( err => console.log(err))\n  }\n\n  forgotPass = (user, props, e) => {\n    e.preventDefault()\n\n    AxiosHelper()\n    axios.post('/api/v1/auth/password/forgot', { email: user.email })\n    .then( resp => {\n      this.setState({ isAuth: false })\n      props.history.push(\"/forgot-password/complete?success=true\")\n    })\n    .catch( err => console.log(err))\n  }\n\n  resetPass = (user, token, e) => {\n    e.preventDefault()\n\n    AxiosHelper()\n    axios.post('/api/v1/auth/password/reset', { password: user.password, token })\n    .then( _resp => {\n      this.setState({ isAuth: false })\n      window.location.href = \"/login\"\n    })\n    .catch( err => console.log(err))\n  }\n\n  logout = (e) => {\n    e.preventDefault()\n\n    AxiosHelper()\n    axios.delete('/api/v1/auth/logout')\n    .then( _resp => {\n      this.setState({ isAuth: false })\n      window.location.href = '/'\n    })\n    .catch( err => console.log(err))\n  }\n\n  render() {\n    return (\n      <AuthContext.Provider\n        value={{\n          isAuth: this.state.isAuth,\n          email: this.state.email,\n          signup: this.signup,\n          login: this.login,\n          logout: this.logout,\n          forgotPass: this.forgotPass,\n          resetPass: this.resetPass\n        }}\n      >\n        {this.props.children}\n      </AuthContext.Provider>\n    )\n  }\n}\n\nconst AuthConsumer = AuthContext.Consumer\n\nexport { AuthProvider, AuthConsumer }\n"]},"metadata":{},"sourceType":"module"}